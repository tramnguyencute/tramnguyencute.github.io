I"ˆ<p>CÃ¢u lá»‡nh <code class="language-plaintext highlighter-rouge">find</code> trong Linux Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ tÃ¬m kiáº¿m táº­p tin vÃ  thÆ° má»¥c dá»±a trÃªn cÃ¡c Ä‘iá»u kiá»‡n Ä‘áº§u vÃ o khÃ¡c nhau. TÆ°Æ¡ng tá»± nhÆ° cÃ¢u lá»‡nh ls thÃ¬ cÃ¢u lá»‡nh <code class="language-plaintext highlighter-rouge">find</code> cÅ©ng lÃ  má»™t trong nhá»¯ng cÃ¢u lá»‡nh Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n trÃªn Linux.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>find <span class="o">[</span><span class="nt">-H</span><span class="o">]</span> <span class="o">[</span><span class="nt">-L</span><span class="o">]</span> <span class="o">[</span><span class="nt">-P</span><span class="o">]</span> <span class="o">[</span><span class="nt">-D</span> debugopts] <span class="o">[</span><span class="nt">-Olevel</span><span class="o">]</span> <span class="o">[</span>path...] <span class="o">[</span>expression]
</pre></td></tr></tbody></table></code></pre></figure>

<p>Trong Ä‘Ã³:</p>

<ul>
  <li>Tuá»³ chá»nÂ <code class="language-plaintext highlighter-rouge">-P</code>Â (lÃ  tuá»³ chá»n máº·c Ä‘á»‹nh): khÃ´ng tÃ¬m kiáº¿m cÃ¡c táº­p tin hay thÆ° má»¥c lá»‘i táº¯t liÃªn káº¿t tá»›i táº­p tin hay thÆ° má»¥c khÃ¡c (hay cÃ²n gá»i lÃ  symbolic link).</li>
  <li>Tuá»³ chá»nÂ <code class="language-plaintext highlighter-rouge">-L</code>Â (lÃ  tuá»³ chá»n máº·c Ä‘á»‹nh): tÃ¬m kiáº¿m táº¥t cáº£ cÃ¡c táº­p tin hay thÆ° má»¥c bao gá»“m cÃ¡c lá»‘i táº¯t liÃªn káº¿t tá»›i táº­p tin hay thÆ° má»¥c khÃ¡c.</li>
  <li>Tuá»³ chá»nÂ <code class="language-plaintext highlighter-rouge">-H</code>: khÃ´ng tÃ¬m kiáº¿m cÃ¡c táº­p tin hay thÆ° má»¥c lá»‘i táº¯t liÃªn káº¿t tá»›i táº­p tin hay thÆ° má»¥c khÃ¡c trá»« khi xá»­ lÃ½ Ä‘á»‘i sá»‘ truyá»n vÃ o cÃ¢u lá»‡nh.</li>
  <li>Tuá»³ chá»nÂ <code class="language-plaintext highlighter-rouge">-D</code>Â (Debug Options): quy Ä‘á»‹nh cÃ¡c tuá»³ chá»n giÃºp gá»¡ rá»‘i.</li>
  <li>Tuá»³ chá»nÂ <code class="language-plaintext highlighter-rouge">-O</code>Â (level): sá»­ dá»¥ng khi muá»‘n tá»‘i Æ°u tá»‘c Ä‘á»™ cá»§a cÃ¢u lá»‡nh.</li>
</ul>

<p>á» bÃ i viáº¿t nÃ y, lá»‡nh <code class="language-plaintext highlighter-rouge">find</code> dÃ¹ng Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c file cÃ³ Ä‘á»‹nh dáº¡ng <strong>UT_001, UT_678, UT_XXX,</strong> â€¦ sau khi tÃ¬m xong thÃ¬ Ä‘Æ°a output vÃ o file list_folder. DÃ¹ng káº¿t há»£p <code class="language-plaintext highlighter-rouge">for do done</code> &amp; <code class="language-plaintext highlighter-rouge">7z</code> Ä‘á»ƒ nÃ©n cÃ¡c thÆ° má»¥c Ä‘Ã³ láº¡i.</p>

<p class="box-note"><strong>LÆ°u Ã½</strong>: Há»‡ Ä‘iá»u hÃ nh (mÃ¬nh cháº¡y Win 10) cá»§a cÃ¡c báº¡n cáº§n pháº£i cÃ³ 7z. <br />
    <a href="https://www.7-zip.org/download.html">Link táº£i 7z, vÃ  nhá»› chá»n phiÃªn báº£n phÃ¹ há»£p.</a><br />
    <code class="language-plaintext highlighter-rouge">7z</code> vÃ  <code class="language-plaintext highlighter-rouge">zip</code> Ä‘á»u sá»­ dá»¥ng Ä‘Æ°á»£c, nhÆ°ng Ä‘á»‘i vá»›i cÃ¡c thÆ° má»¥c bÃªn trong cÃ³ chá»©a cÃ¡c tá»‡p tin <code class="language-plaintext highlighter-rouge">name file</code> thuá»™c dáº¡ng <code class="language-plaintext highlighter-rouge">long path</code> thÃ¬ <code class="language-plaintext highlighter-rouge">zip</code> sáº½ khÃ´ng nÃ©n Ä‘Æ°á»£c.</p>

<div class="post-img-post">
    <img src="/img/2020-09-09-bash-script-2/tao_file_UT.png" />
</div>

<p><strong>Source code:</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="c">#!/bin/bash -x</span>
find <span class="nt">-maxdepth</span> 1 <span class="nt">-mindepth</span> 1 <span class="nt">-type</span> d <span class="nt">-name</span> <span class="s2">"UT_[0-9][0-9][0-9]*"</span>  <span class="o">&gt;</span> list_folder

<span class="k">for </span>file <span class="k">in</span> <span class="sb">`</span><span class="nb">cat </span>list_folder<span class="sb">`</span>
<span class="k">do
	</span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\e</span><span class="s2">[30;48;5;82m </span><span class="nv">$file</span><span class="s2"> </span><span class="se">\e</span><span class="s2">[0m"</span>

	7z a <span class="nv">$file</span>.zip <span class="nv">$file</span>

<span class="k">done 

</span><span class="nb">rm</span> <span class="nt">-rf</span> list_folder
<span class="nb">read</span> <span class="nt">-n</span> 1 <span class="nt">-r</span> <span class="nt">-s</span> <span class="nt">-p</span> <span class="s1">$'Press enter to exit...</span><span class="se">\n</span><span class="s1">'</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Táº¡o file <code class="language-plaintext highlighter-rouge">auto_zip.sh</code> vá»›i ná»™i dung code nhÆ° trÃªn rá»“i cháº¡y bash:</p>
<div class="post-img-post">
    <img src="/img/2020-09-09-bash-script-2/file_7z_bash.png" />
</div>

<p>Káº¿t quáº£ sau khi cháº¡y script chá»‰ nÃ©n nhá»¯ng file cáº§n thiáº¿t, nhá»¯ng file khÃ¡c nhÆ° <em>ABC_XXX</em> sáº½ khÃ´ng áº£nh hÆ°á»Ÿng tá»›i.</p>
<div class="post-img-post">
    <img src="/img/2020-09-09-bash-script-2/output_7z.png" />
</div>

<p>Link táº£i <a href="https://git-scm.com/"><strong><code class="language-plaintext highlighter-rouge">Git BASH.</code></strong></a></p>

<svg viewBox="0 0 900 200">

  <!-- Symbol -->
  <symbol id="s-text">
    <text text-anchor="middle" x="50%" y="50%" dy=".35em">
      Hi, I'm Bang
    </text>
  </symbol>  

  <!-- Duplicate symbols -->
  <use xlink:href="#s-text" class="text"></use>
  <use xlink:href="#s-text" class="text"></use>
  <use xlink:href="#s-text" class="text"></use>
  <use xlink:href="#s-text" class="text"></use>
  <use xlink:href="#s-text" class="text"></use>
</svg>

:ET